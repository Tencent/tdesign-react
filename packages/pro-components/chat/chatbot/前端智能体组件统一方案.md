# å‰ç«¯æ™ºèƒ½ä½“ç»„ä»¶ç»Ÿä¸€æ–¹æ¡ˆ

## 1. ç›®æ ‡ä¸èƒŒæ™¯

### èƒŒæ™¯

æœªæ¥ä¸»æµçš„ Agent äº¤äº’å½¢æ€å°†ç”±ä¸€ä¸ªæ ¸å¿ƒå¯¹è¯ç•Œé¢ï¼ˆé€šå¸¸ä½äºä¸€ä¾§ï¼‰å’Œæ•°æ®å‘ˆç°/å·¥ä½œåŒºï¼ˆä½äºå¦ä¸€ä¾§ï¼‰æ„æˆã€‚ç”¨æˆ·ä¸ Agent çš„æ‰€æœ‰æ ¸å¿ƒäº¤äº’éƒ½åœ¨å¯¹è¯æµä¸­å®Œæˆã€‚å½“éœ€è¦å±•ç¤ºå¤æ‚ä¿¡æ¯æˆ–éœ€è¦ç”¨æˆ·è¿›è¡Œç»“æ„åŒ–è¾“å…¥æ—¶ï¼ŒAgent ä¼šé€šè¿‡è°ƒç”¨å·¥å…·ï¼ˆToolsï¼‰çš„æ–¹å¼ï¼Œåœ¨å‰ç«¯åº”ç”¨ä¸­å”¤èµ·ä¸€ä¸ªæˆ–å¤šä¸ª UI ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶è´Ÿè´£ä¸ºç”¨æˆ·å‘ˆç°ä¿¡æ¯æˆ–è¯·æ±‚ç”¨æˆ·åé¦ˆï¼Œå¹¶å°†ç»“æœè¿”å›ç»™ Agentï¼Œä»è€Œé©±åŠ¨å¯¹è¯ç»§ç»­è¿›è¡Œã€‚
![image](https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MDMyNjI1MjEwMA_712142_aDMxDV5ItJ8F92qs_1754443296?w=1553&h=1231&type=image/png)
ä¸Šå›¾å±•ç¤ºäº†è¿™ç§å…¸å‹çš„äº¤äº’æ¨¡å¼ï¼šå³ä¾§æ˜¯å¯¹è¯æµï¼Œå…¶ä¸­å†…åµŒäº† Agent å”¤èµ·çš„ç”¨äºä¿¡æ¯æ”¶é›†ï¼ˆè”ç³»æ–¹å¼ï¼‰å’Œä¿¡æ¯å±•ç¤ºï¼ˆå¯é€‰è½¦è¾†ï¼‰çš„å‰ç«¯ç»„ä»¶ï¼›å·¦ä¾§æ˜¯æ ¹æ®äº¤äº’ç»“æœæ›´æ–°çš„æ•°æ®å‘ˆç°é¢æ¿ã€‚

### ç›®æ ‡

æœ¬æ–¹æ¡ˆæ—¨åœ¨ä¸ºè¿™ç§äº¤äº’æ¨¡å¼ä¸‹çš„å‰ç«¯ç»„ä»¶æä¾›ä¸€å¥—ç»Ÿä¸€ã€é«˜æ•ˆçš„å¼€å‘è§„èŒƒã€‚ç›®æ ‡æ˜¯å®ç°ç»„ä»¶é€»è¾‘ä¸ UI çš„é«˜åº¦å†…èšï¼Œå¹¶ç®€åŒ–å¼€å‘è€…åœ¨ä¸º AI Agent åˆ›å»ºå‰ç«¯å·¥å…·æ—¶çš„å¼€å‘ä½“éªŒã€‚é€šè¿‡ä¸€ä¸ªæ™ºèƒ½é€‚é…å™¨ï¼Œéµå¾ªæœ¬è§„èŒƒçš„ç»„ä»¶å¯ä»¥æ— ç¼æ¥å…¥ CopilotKit æˆ–å…¶ä»–å…¼å®¹æ™ºèƒ½ä½“ UI åè®®çš„å®¿ä¸»ç¯å¢ƒã€‚

## 2. æ ¸å¿ƒè®¾è®¡ï¼šç»Ÿä¸€çš„ Action é…ç½®å¯¹è±¡

ä¸ºäº†è§£å†³éäº¤äº’å¼åœºæ™¯ä¸‹ handler ä¸ component åˆ†ç¦»çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªç»Ÿä¸€çš„ Action é…ç½®å¯¹è±¡ (AgentToolcallConfig)ã€‚ä¸€ä¸ª Action çš„æ‰€æœ‰ç›¸å…³é€»è¾‘â€”â€”åŒ…æ‹¬å…ƒæ•°æ®ã€ä¸šåŠ¡é€»è¾‘ (handler) å’Œ UI é€»è¾‘ (component)â€”â€”éƒ½å°è£…åœ¨è¿™ä¸ªå•ä¸€çš„å¯¹è±¡ä¸­ï¼Œå®ç°äº†é«˜åº¦å†…èšã€‚
é€‚é…å™¨ä¼šæ ¹æ®æ­¤é…ç½®å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨ handler å±æ€§ï¼Œæ¥æ™ºèƒ½åœ°å†³å®šå…¶è¡Œä¸ºæ¨¡å¼ã€‚

## 3. æŠ€æœ¯è§„èŒƒ

### 3.1. ç»„ä»¶ Props æ¥å£ï¼šToolcallComponentProps

è¿™æ˜¯æ‰€æœ‰æ™ºèƒ½ä½“ç»„ä»¶å¿…é¡»éµå¾ªçš„ã€å”¯ä¸€çš„ Props å¥‘çº¦ã€‚

```
/**
 * æ™ºèƒ½ä½“å¯äº¤äº’ç»„ä»¶çš„æ ‡å‡† Props æ¥å£
 */
export interface ToolcallComponentProps<
  TArgs extends object = any,
  TResult = any,
  TResponse = any
> {
  /** ç»„ä»¶çš„å½“å‰æ¸²æŸ“çŠ¶æ€: 'idle' | 'inProgress' | 'executing' | 'complete' | 'error' */
  status: 'idle' | 'inProgress' | 'executing' | 'complete' | 'error';
  /** Agent è°ƒç”¨æ—¶ä¼ å…¥çš„åˆå§‹å‚æ•° */
  args: TArgs;
  /** å½“ status ä¸º 'complete' æ—¶ï¼ŒåŒ…å« Action çš„æœ€ç»ˆæ‰§è¡Œç»“æœ */
  result?: TResult;

  /** å½“ status ä¸º 'error' æ—¶ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯ */
  error?: Error;
  /**
   * ã€äº¤äº’æ ¸å¿ƒã€‘ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå°†ç”¨æˆ·çš„äº¤äº’ç»“æœè¿”å›ç»™å®¿ä¸»ç¯å¢ƒã€‚
   * ä»…åœ¨â€œäº¤äº’å¼â€åœºæ™¯ä¸‹ç”±å®¿ä¸»æä¾›ã€‚
   */
  respond?: (response: TResponse) => void;
}
```

### 3.2. Action é…ç½®æ¥å£ï¼šAgentToolcallConfig

è¿™æ˜¯æ–¹æ¡ˆçš„æ ¸å¿ƒï¼Œå®ƒé€šè¿‡ TypeScript çš„è”åˆç±»å‹å®šä¹‰äº†ä¸¤ç§ Action æ¨¡å¼ã€‚

```
import { ToolcallComponentProps } from './agent-spec';
// åœºæ™¯ä¸€ï¼šéäº¤äº’å¼ Action çš„é…ç½® (æœ‰ handler)
interface NonInteractiveActionConfig<TArgs, TResult> {
  name: string;
  description: string;
  parameters: any[];
  /** ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå™¨ */
  handler: (args: TArgs) => Promise<TResult>;
  /** çŠ¶æ€æ˜¾ç¤ºç»„ä»¶ */
  component: React.FC<ToolcallComponentProps<TArgs, TResult>>;
}
// åœºæ™¯äºŒï¼šäº¤äº’å¼ Action çš„é…ç½® (æ—  handler)
interface InteractiveActionConfig<TArgs, TResult, TResponse> {
  name: string;
  description: string;
  parameters: any[];
  /** äº¤äº’å¼UIç»„ä»¶ */
  component: React.FC<ToolcallComponentProps<TArgs, TResult, TResponse>>;
  /** handler å±æ€§ä¸å­˜åœ¨ï¼Œä»¥æ­¤ä½œä¸ºåŒºåˆ†æ ‡å¿— */
  handler?: never;
}
// æœ€ç»ˆçš„é…ç½®ç±»å‹
export type AgentToolcallConfig<TArgs, TResult, TResponse> =
  | NonInteractiveActionConfig<TArgs, TResult>
  | InteractiveActionConfig<TArgs, TResult, TResponse>;
```

## 4. ç»Ÿä¸€æ™ºèƒ½é€‚é…å™¨ï¼šuseAgentAction

è¿™ä¸ªç»Ÿä¸€çš„é€‚é…å™¨å–ä»£äº†ä¹‹å‰çš„ä¸¤ä¸ªã€‚å®ƒé€šè¿‡æ£€æŸ¥é…ç½®å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨ handlerï¼Œæ™ºèƒ½åœ°æ¡¥æ¥åˆ° CopilotKit å¯¹åº”çš„æ¨¡å¼ã€‚

```
// agent-unified-adapter.ts
import React from 'react';
import { useCopilotAction } from "@copilotkit/react-core";
import { AgentToolcallConfig } from './agent-config-spec';
import { ToolcallComponentProps } from './agent-spec';
// ç±»å‹å®ˆå«ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºéäº¤äº’å¼é…ç½®
function isNonInteractive<TArgs, TResult>(
  config: any
): config is { handler: (args: TArgs) => Promise<TResult> } {
  return typeof config.handler === 'function';
}
/**
 * ç»Ÿä¸€çš„ã€æ™ºèƒ½çš„ Agent Action é€‚é…å™¨ Hook
 */
export function useAgentToolcall<TArgs, TResult, TResponse>(
  config: AgentToolcallConfig<TArgs, TResult, TResponse>
) {
  const { name, description, parameters, component } = config;
  // **æ™ºèƒ½åˆ¤æ–­çš„æ ¸å¿ƒ**
  if (isNonInteractive<TArgs, TResult>(config)) {
    // æ¨¡å¼ä¸€ï¼šéäº¤äº’å¼ -> æ¡¥æ¥åˆ° handler + render
    useCopilotAction<any>({
      name, description, parameters,
      handler: config.handler,
      render: (props) => {
        const agentProps: ToolcallComponentProps<TArgs, TResult> = {
          status: props.status,
          args: props.args as TArgs,
          result: props.result,
          error: props.error,
        };
        return React.createElement(component, agentProps);
      },
    });
  } else {
    // æ¨¡å¼äºŒï¼šäº¤äº’å¼ -> æ¡¥æ¥åˆ° renderAndWaitForResponse
    useCopilotAction<any>({
      name, description, parameters,
      renderAndWaitForResponse: (props) => {
        const agentProps: ToolcallComponentProps<TArgs, TResult, TResponse> = {
          status: props.status,
          args: props.args as TArgs,
          result: props.result,
          error: props.error,
          respond: props.respond,
        };
        return React.createElement(component, agentProps);
      },
    });
  }
}
```

## 5. ä½¿ç”¨ç¤ºä¾‹

### 5.1. åœºæ™¯ä¸€ï¼šéäº¤äº’å¼ç»„ä»¶ (çŠ¶æ€æ˜¾ç¤º)

ç”¨ä¾‹: Agent éœ€è¦æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„åå°ä»»åŠ¡ï¼ˆå¦‚ç”ŸæˆæŠ¥ u å‘Šï¼‰ï¼Œå¹¶å®æ—¶åœ¨å‰ç«¯å±•ç¤ºä»»åŠ¡çŠ¶æ€ã€‚ç»„ä»¶ä»…ä½œä¸ºâ€œçŠ¶æ€æ˜¾ç¤ºå™¨â€ã€‚

ç»„ä»¶ä»£ç : ReportGeneratorStatus.tsx

```
import React from 'react';
import { ToolcallComponentProps } from './agent-spec';
// å®šä¹‰ç»„ä»¶æ‰€éœ€çš„æ•°æ®ç±»å‹
type ReportArgs = {
  reportType: 'sales' | 'users';
  dateRange: { start: string; end: string; };
};
type ReportResult = {
  downloadUrl: string;
  recordCount: number;
};
// å®ç°ç»„ä»¶ï¼Œå®ƒæ ¹æ® props çš„å˜åŒ–æ¸²æŸ“ä¸åŒçŠ¶æ€çš„ UI
export const ReportGeneratorStatus: React.FC<ToolcallComponentProps<ReportArgs, ReportResult>> = ({
  status,
  args,
  result,
  error
}) => {
  switch (status) {
    case 'inProgress':
      return <div>â³ æ­£åœ¨å‡†å¤‡ç”Ÿæˆ {args.reportType} æŠ¥å‘Š...</div>;
    case 'executing':
      return (
        <div>
          ğŸ”„ æ­£åœ¨ç”ŸæˆæŠ¥å‘Š...
          <p>ç±»å‹: {args.reportType}</p>
          <p>æ—¥æœŸèŒƒå›´: {args.dateRange?.start} - {args.dateRange?.end}</p>
        </div>
      );
    case 'complete':
      return (
        <div>
          âœ… æŠ¥å‘Šç”Ÿæˆå®Œæˆ!
          <p>å…±åŒ…å« {result?.recordCount} æ¡è®°å½•ã€‚</p>
          <a href={result?.downloadUrl} target="_blank" rel="noopener noreferrer">
            ç‚¹å‡»ä¸‹è½½æŠ¥å‘Š
          </a>
        </div>
      );
    case 'error':
      return <div>âŒ æŠ¥å‘Šç”Ÿæˆå¤±è´¥: {error?.message}</div>;
    default:
      return <div>æŠ¥å‘Šä»»åŠ¡å·²åˆ›å»ºã€‚</div>;
  }
};
```

Action é…ç½®ä¸ä½¿ç”¨

```
// actions/report.action.ts
import { AgentToolcallConfig } from '../specs';
import { ReportGeneratorStatus } from '../components/ReportGeneratorStatus';
export const generateReportAction: AgentToolcallConfig = {
  name: "generateReport",
  description: "ç”Ÿæˆä¸€ä»½æŒ‡å®šç±»å‹å’Œæ—¥æœŸèŒƒå›´çš„æ•°æ®æŠ¥å‘Š",
  parameters: [
    { name: "reportType", type: "string", enum: ['sales', 'users'], required: true },
    { name: "dateRange", type: "object", required: true, properties: [
      { name: "start", type: "string", description: "ISO æ ¼å¼çš„å¼€å§‹æ—¥æœŸ" },
      { name: "end", type: "string", description: "ISO æ ¼å¼çš„ç»“æŸæ—¥æœŸ" },
    ]}
  ],
  // ä¸šåŠ¡é€»è¾‘å’ŒUIç»„ä»¶å†…èšåœ¨ä¸€ä¸ªé…ç½®ä¸­
  handler: async (args: ReportArgs) => {
    console.log("å¼€å§‹ç”ŸæˆæŠ¥å‘Š:", args);
    // const report = await reportService.create(args);
    // return { downloadUrl: report.url, recordCount: report.count };
    await new Promise(resolve => setTimeout(resolve, 2000)); // æ¨¡æ‹Ÿè€—æ—¶
    return { downloadUrl: "#", recordCount: 125 };
  },
  component: ReportGeneratorStatus,
};
// features/MyReportFeature.tsx
import { useAgentToolcall } from '../adapter';
import { generateReportAction } from '../actions/report.action';
function MyReportFeature() {
  // è°ƒç”¨éå¸¸ç®€æ´ï¼Œé€‚é…å™¨ä¼šæ ¹æ® handler çš„å­˜åœ¨è‡ªåŠ¨é€‰æ‹©æ­£ç¡®æ¨¡å¼
  useAgentToolcall(generateReportAction);
  return (/* UI to trigger the action */);
}
```

### 5.2. åœºæ™¯äºŒï¼šç®€å•äº¤äº’å¼ç»„ä»¶ (ç”¨æˆ·ç¡®è®¤)

ç”¨ä¾‹: Agent æ‰§è¡Œä¸€ä¸ªå±é™©æ“ä½œå‰ï¼ˆå¦‚åˆ é™¤æ•°æ®ï¼‰ï¼Œå¿…é¡»å¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œç­‰å¾…ç”¨æˆ·æ˜ç¡®ç¡®è®¤æˆ–å–æ¶ˆã€‚

ç»„ä»¶ä»£ç : ConfirmDeletionDialog.tsx

```
import React from 'react';
import { ToolcallComponentProps } from './agent-spec';
// å®šä¹‰ç»„ä»¶æ‰€éœ€çš„æ•°æ®ç±»å‹
type ConfirmArgs = { itemName: string; itemId: string; };
type ConfirmResponse = { confirmed: boolean; };
type ConfirmResult = ConfirmResponse; // äº¤äº’å¼ç»„ä»¶çš„ Result é€šå¸¸ä¸ Response ä¸€è‡´
// å®ç°ç»„ä»¶
export const ConfirmDeletionDialog: React.FC<ToolcallComponentProps<ConfirmArgs, ConfirmResult, ConfirmResponse>> = ({
  status,
  args,
  result,
  respond
}) => {
  // äº¤äº’é˜¶æ®µï¼šç­‰å¾…ç”¨æˆ·è¾“å…¥
  if (status === 'executing') {
    return (
      <div className="confirm-dialog">
        <h3>âš ï¸ æ‚¨ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ</h3>
        <p>é¡¹ç›®: {args.itemName} (ID: {args.itemId})</p>
        <p>æ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚</p>
        <div className="button-group">
          {/* è°ƒç”¨ respond å°†ç”¨æˆ·çš„é€‰æ‹©è¿”å›ç»™ Agent */}
          <button onClick={() => respond?.({ confirmed: true })}>ç¡®è®¤åˆ é™¤</button>
          <button onClick={() => respond?.({ confirmed: false })}>å–æ¶ˆ</button>
        </div>
      </div>
    );
  }
  // å®Œæˆé˜¶æ®µï¼šæ˜¾ç¤ºç”¨æˆ·çš„æœ€ç»ˆé€‰æ‹©
  if (status === 'complete') {
    return (
      <div>
        {result?.confirmed
          ? `âœ… æ‚¨å·²ç¡®è®¤åˆ é™¤é¡¹ç›® ${args.itemName}ã€‚`
          : `â„¹ï¸ æ‚¨å·²å–æ¶ˆäº†åˆ é™¤æ“ä½œã€‚`}
      </div>
    );
  }
  // å‡†å¤‡é˜¶æ®µ
  return <div>â³ æ­£åœ¨åŠ è½½ç¡®è®¤ä¿¡æ¯...</div>;
};
```

Action é…ç½®ä¸ä½¿ç”¨

```
// actions/deletion.action.ts
import { AgentToolcallConfig } from '../specs';
import { ConfirmDeletionDialog } from '../components/ConfirmDeletionDialog';
export const deleteItemAction: AgentToolcallConfig = {
  name: "deleteItem",
  description: "è¯·æ±‚ç”¨æˆ·ç¡®è®¤åˆ é™¤æŒ‡å®šé¡¹ç›®",
  parameters: [
      { name: "itemName", type: "string", required: true },
      { name: "itemId", type: "string", required: true },
  ],
  // æ²¡æœ‰ handlerï¼Œé€‚é…å™¨ä¼šè‡ªåŠ¨è¯†åˆ«ä¸ºäº¤äº’å¼
  component: ConfirmDeletionDialog,
};
// features/MyDataGrid.tsx
import { useAgentToolcall } from '../adapter';
import { deleteItemAction } from '../actions/deletion.action';
function MyDataGrid() {
  // è°ƒç”¨æ–¹å¼ä¸éäº¤äº’å¼å®Œå…¨ä¸€è‡´
  useAgentToolcall(deleteItemAction);
  return (/* UI to trigger the action */);
}
```

### 5.3. åœºæ™¯ä¸‰ï¼šå¤æ‚äº¤äº’å¼ç»„ä»¶ (æ–‡ä»¶ä¸Šä¼ )

ç”¨ä¾‹: Agent éœ€è¦ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œç»„ä»¶å†…éƒ¨éœ€è¦å¤„ç†æ–‡ä»¶é€‰æ‹©ã€è¯»å–ã€æ ¡éªŒç­‰å¤æ‚é€»è¾‘ï¼Œç„¶åå°†æ–‡ä»¶å†…å®¹è¿”å›ã€‚

ç»„ä»¶ä»£ç : FileUpload.tsx

```
import React, { useState, useCallback } from 'react';
import { ToolcallComponentProps } from './agent-spec';
// å®šä¹‰æ•°æ®ç±»å‹
type UploadArgs = {
  allowedTypes: string[]; // e.g., ['image/png', 'application/pdf']
  maxSizeMB: number;
};
type UploadResponse = {
  success: boolean;
  fileName?: string;
  fileContent?: string; // Base64 encoded
  error?: string;
};
type UploadResult = UploadResponse;
// å®ç°ç»„ä»¶ï¼ŒåŒ…å«å†…éƒ¨çŠ¶æ€ç®¡ç†
export const FileUpload: React.FC<ToolcallComponentProps<UploadArgs, UploadResult, UploadResponse>> = ({
  status,
  args,
  result,
  respond
}) => {
  const [internalError, setInternalError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const handleFileChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;
    if (!args.allowedTypes.includes(file.type)) {
      setInternalError(`æ–‡ä»¶ç±»å‹é”™è¯¯ã€‚è¯·ä¸Šä¼  ${args.allowedTypes.join(', ')} æ ¼å¼ã€‚`);
      return;
    }
    if (file.size > args.maxSizeMB * 1024 * 1024) {
      setInternalError(`æ–‡ä»¶è¿‡å¤§ã€‚è¯·ä¸Šä¼ å°äº ${args.maxSizeMB}MB çš„æ–‡ä»¶ã€‚`);
      return;
    }
    setInternalError(null);
    setIsLoading(true);
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => {
      setIsLoading(false);
      respond?.({
        success: true,
        fileName: file.name,
        fileContent: reader.result as string,
      });
    };
    reader.onerror = () => {
      setIsLoading(false);
      respond?.({ success: false, error: 'æ–‡ä»¶è¯»å–å¤±è´¥ã€‚' });
    };
  }, [args, respond]);
  if (status === 'executing') {
    return (
      <div className="file-uploader">
        <h4>è¯·ä¸Šä¼ æ–‡ä»¶</h4>
        <p>å…è®¸æ ¼å¼: {args.allowedTypes.join(', ')}</p>
        <p>æœ€å¤§ä½“ç§¯: {args.maxSizeMB}MB</p>
        <input type="file" onChange={handleFileChange} disabled={isLoading} />
        {isLoading && <div>ğŸ”„ æ­£åœ¨è¯»å–æ–‡ä»¶...</div>}
        {internalError && <div style={{ color: 'red' }}>{internalError}</div>}
      </div>
    );
  }
  if (status === 'complete') {
    return (
      <div>
        {result?.success
          ? `âœ… æ–‡ä»¶ ${result.fileName} ä¸Šä¼ æˆåŠŸ!`
          : `âŒ æ–‡ä»¶ä¸Šä¼ å¤±è´¥: ${result?.error}`}
      </div>
    );
  }
  return <div>â³ å‡†å¤‡ä¸Šä¼ ...</div>;
};
```

Action é…ç½®ä¸ä½¿ç”¨

```
// actions/upload.action.ts
import { AgentToolcallConfig } from '../specs';
import { FileUpload } from '../components/FileUpload';
export const uploadFileAction: AgentToolcallConfig = {
  name: "uploadFile",
  description: "è¯·æ±‚ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„æ–‡ä»¶",
  parameters: [
      { name: "allowedTypes", type: "array", items: { type: "string" }, required: true },
      { name: "maxSizeMB", type: "number", required: true },
  ],
  // ä¾ç„¶æ²¡æœ‰ handler
  component: FileUpload,
};
// features/MyUploader.tsx
import { useAgentToolcall } from '../adapter';
import { uploadFileAction } from '../actions/upload.action';
function MyUploader() {
  useAgentToolcall(uploadFileAction);
  return (/* UI to trigger the action */);
}
```

## 6. æ–¹æ¡ˆä¼˜åŠ¿

             1.
     é«˜åº¦å†…èš (High Cohesion): ä¸€ä¸ª Action çš„æ‰€æœ‰é€»è¾‘ï¼ˆä¸šåŠ¡ handler å’Œ UI componentï¼‰éƒ½å°è£…åœ¨åŒä¸€ä¸ªé…ç½®å¯¹è±¡ä¸­ï¼Œä»£ç ç»„ç»‡æ¸…æ™°ï¼Œç»´æŠ¤æ€§æé«˜ã€‚
             2.
     API ç®€åŒ– (Simplified API): å¼€å‘è€…åªéœ€å­¦ä¹ å’Œä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„ useAgentToolcall Hookï¼Œæ— éœ€å…³å¿ƒåº•å±‚ä½¿ç”¨äº†å“ªç§ CopilotKit æ¨¡å¼ï¼Œå¿ƒæ™ºè´Ÿæ‹…å¤§å¤§é™ä½ã€‚
             3.
     ç±»å‹å®‰å…¨ (Type-Safe): é€šè¿‡ TypeScript çš„è”åˆç±»å‹å’Œç±»å‹å®ˆå«ï¼Œé€‚é…å™¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šä½¿ç”¨å“ªç§æ¨¡å¼ï¼Œä»£ç å¥å£®ï¼Œä¸æ˜“å‡ºé”™ã€‚
             4.
     å¯å‘ç°æ€§ä¸å¯ç§»æ¤æ€§ (Discoverability & Portability): ç‹¬ç«‹çš„ Action é…ç½®å¯¹è±¡æ˜“äºè¢«é›†ä¸­ç®¡ç†å’ŒåŠ¨æ€åŠ è½½ï¼Œä¸ºæœªæ¥çš„â€œActionå¸‚åœºâ€æˆ–æ’ä»¶åŒ–ç³»ç»Ÿå¥ å®šäº†åŸºç¡€ã€‚åŒæ—¶ï¼Œæ ¸å¿ƒç»„ä»¶ä¸æ¡†æ¶æ— å…³ï¼Œå¯è½»æ¾ç§»æ¤ã€‚
